---
phase: 03-core-task-management
plan: 03
type: execute
wave: 3
depends_on: ["03-02"]
files_modified:
  - src/app/(app)/tasks/page.tsx
  - src/app/(app)/tasks/new/page.tsx
  - src/app/(app)/dashboard/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can view their tasks at /tasks"
    - "User can create tasks at /tasks/new"
    - "Dashboard shows quick-add button and task statistics"
    - "All routes are protected (require authentication)"
  artifacts:
    - path: "src/app/(app)/tasks/page.tsx"
      provides: "Task list page"
      min_lines: 30
    - path: "src/app/(app)/tasks/new/page.tsx"
      provides: "Create task page"
      min_lines: 20
    - path: "src/app/(app)/dashboard/page.tsx"
      provides: "Updated dashboard with task stats"
      min_lines: 50
  key_links:
    - from: "src/app/(app)/tasks/page.tsx"
      to: "src/shared/lib/dal.ts"
      via: "getTasksByUser import"
      pattern: "getTasksByUser"
    - from: "src/app/(app)/tasks/page.tsx"
      to: "src/shared/components/TaskList.tsx"
      via: "component import"
      pattern: "TaskList"
    - from: "src/app/(app)/tasks/new/page.tsx"
      to: "src/shared/components/TaskForm.tsx"
      via: "component import"
      pattern: "TaskForm"
---

<objective>
Create the task list page, task creation page, and update dashboard with task integration.

Purpose: Wire up the UI components to actual routes, allowing users to view and create tasks. Update dashboard to show real task statistics and quick-access button.

Output: Three functional pages - task list, create task, and updated dashboard with task stats.
</objective>

<execution_context>
@/Users/dansidanutz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dansidanutz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-core-task-management/03-CONTEXT.md
@.planning/phases/03-core-task-management/03-RESEARCH.md
@src/shared/components/TaskList.tsx
@src/shared/components/TaskForm.tsx
@src/shared/lib/dal.ts
@src/app/(app)/dashboard/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create tasks list page at /tasks</name>
  <files>src/app/(app)/tasks/page.tsx</files>
  <action>
Create a Server Component page for displaying the task list.

1. Create directory and file: `src/app/(app)/tasks/page.tsx`

2. Implement as Server Component:
```typescript
import { Suspense } from 'react'
import Link from 'next/link'
import { getTasksByUser } from '@/shared/lib/dal'
import { TaskList } from '@/shared/components/TaskList'
```

3. Page structure:
- Header row with:
  - Title: "My Tasks" (text-3xl font-bold)
  - "New Task" button linking to /tasks/new (per CONTEXT.md: dedicated page for creation)

4. Main content:
- Wrap task loading in Suspense for streaming
- Use skeleton loader while loading

5. TaskListContent async component:
- Call getTasksByUser()
- Pass tasks to TaskList component
- Handle empty state in TaskList component

6. Skeleton loader:
- Three sections (for status groups)
- Each with title skeleton + 3 card skeletons
- animate-pulse effect
- Match layout of actual TaskList

7. Note: Page is inside (app) route group, so middleware already protects it. No additional auth check needed.
  </action>
  <verify>
Directory and file exist: src/app/(app)/tasks/page.tsx
Navigate to http://localhost:3000/tasks - page loads (while dev server running)
TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>Tasks list page displays all user tasks grouped by status with loading state</done>
</task>

<task type="auto">
  <name>Task 2: Create new task page at /tasks/new</name>
  <files>src/app/(app)/tasks/new/page.tsx</files>
  <action>
Create a page for the task creation form.

1. Create directory and file: `src/app/(app)/tasks/new/page.tsx`

2. Implement as simple wrapper:
```typescript
import { TaskForm } from '@/shared/components/TaskForm'

export default function NewTaskPage() {
  return (
    <div>
      {/* Page header */}
      {/* TaskForm component */}
    </div>
  )
}
```

3. Page structure:
- Header: "Create New Task" (text-2xl font-bold)
- Breadcrumb or back link to /tasks
- TaskForm component (handles all form logic)

4. Styling:
- max-w-2xl for form width
- Proper spacing (py-6 or similar)
- Consistent with other pages

5. No additional logic needed - TaskForm handles:
- Form state with useActionState
- Validation
- Submit via Server Action
- Redirect after success

This follows CONTEXT.md decision: "Dedicated page at /tasks/new for task creation"
  </action>
  <verify>
Directory and file exist: src/app/(app)/tasks/new/page.tsx
TypeScript compiles: `npx tsc --noEmit`
Navigate to http://localhost:3000/tasks/new - page loads
  </verify>
  <done>Create task page displays TaskForm for adding new tasks</done>
</task>

<task type="auto">
  <name>Task 3: Update dashboard with task statistics and quick-add button</name>
  <files>src/app/(app)/dashboard/page.tsx</files>
  <action>
Update the existing dashboard to show real task statistics and quick access.

1. Update imports in dashboard/page.tsx:
```typescript
import Link from 'next/link'
import { getUser, getTasksByUser } from '@/shared/lib/dal'
```

2. Fetch real data:
```typescript
const [user, tasks] = await Promise.all([
  getUser(),
  getTasksByUser(),
])
```

3. Calculate statistics:
```typescript
const totalTasks = tasks.length
const inProgressTasks = tasks.filter(t => t.status === 'in_progress').length
const completedTasks = tasks.filter(t => t.status === 'done').length
```

4. Replace hardcoded "0" values with real counts:
- Total tasks: totalTasks
- In Progress: inProgressTasks
- Completed: completedTasks

5. Add quick-add button (per CONTEXT.md):
- Primary button linking to /tasks/new
- Plus icon or "+" text
- Position: In header row next to "Dashboard" title

6. Update "Getting Started" section:
- If user has tasks: Show "View all tasks" link to /tasks
- If no tasks: Keep existing CTA but change to "Create your first task"

7. Optional: Add recent tasks preview
- Show 3 most recent tasks (optional, skip if time)
- Link to full task list
  </action>
  <verify>
File updated: src/app/(app)/dashboard/page.tsx
TypeScript compiles: `npx tsc --noEmit`
Dashboard shows real task counts when logged in
Quick-add button links to /tasks/new
  </verify>
  <done>Dashboard displays real task statistics and provides quick access to task creation</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Route validation:
   - /tasks loads and shows task list (or empty state)
   - /tasks/new loads and shows TaskForm
   - Dashboard shows real task statistics

2. Integration:
   - Tasks page fetches from DAL
   - Dashboard shows accurate counts
   - All pages use shared components

3. Navigation flow:
   - Dashboard -> New Task button -> /tasks/new
   - /tasks -> New Task button -> /tasks/new
   - After creating task -> redirects to /tasks
   - /tasks/new -> Cancel -> /tasks

4. TypeScript:
   - `npx tsc --noEmit` passes
</verification>

<success_criteria>
- /tasks displays user's tasks grouped by status
- /tasks/new shows task creation form
- Dashboard shows real task statistics (not hardcoded 0)
- Dashboard has quick-add button linking to /tasks/new
- All routes are protected (via (app) route group middleware)
- Navigation flows work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/03-core-task-management/03-03-SUMMARY.md`
</output>
